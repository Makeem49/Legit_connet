{% extends 'base.html'%}
{% import 'components/render_form.html' as f %}

{% block content %}
<div class="container py-3">
    <form method="POST" action="{{url_for('user.settings')}}">
        {{ form.hidden_tag() }}
        <div class="user-profile">
            <h2>{{current_user.first_name}} Account</h2>
            <div class="mt-3">
                <h5>Profile</h5>
                <p>The information will be shown publicly, so becareful of what you share.</p>
            </div>

            <div class="my-4">
                <img src="https://randomuser.me/api/portraits/women/12.jpg"
                    class="mb-3 img-fluid profile rounded-circle">
                <input class="mx-4" type="file" name="Change profile pictures" id="">
            </div>
            <div class="row my-3">
                <div class="col-xm-12 col-md-6 mt-xm-2 mt-2">
                    {{ f.render_form_field(form.surname)}}
                </div>
                <div class="col-xm-12 col-md-6 mt-xm-2 mt-2">
                    {{ f.render_form_field(form.name) }}
                </div>
            </div>
            <div class="input-group flex-nowrap">
                <span class="input-group-text" id="addon-wrapping">@</span>
                {% if current_user.username %}
                {{form.username(disabled=True , class="form-control", placeholder='Username' ,
                **{"aria-label":"Username",
                "aria-describedby":"addon-wrapping"}) }}
                {% else %}
                {% if form.username.errors %}
                {{form.username(class="form-control", placeholder='Username',
                **{"aria-label":"Username","aria-describedby":"addon-wrapping"}) }}
                <ul class="invalid-feedback" id="validationServerUsernameFeedback">
                    {% for error in form.username.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                {{form.username(class="form-control", placeholder='Username',
                **{"aria-label":"Username","aria-describedby":"addon-wrapping"}) }}
                {% endif %}
                {% endif %}
            </div>
            <div class="my-3 row">
                <div class="col-xm-12 col-md-8">
                    {{ f.render_form_field(form.email) }}
                </div>
                <div class="col-xm-12 col-md-3 text-end">
                    <a href="{{url_for('auth.update_email_address')}}" class="btn btn-secondary">Change email</a>
                </div>

            </div>
            <div class="row my-3">
                <div class="col-xm-12 col-md-6 mt-xm-2 mt-2">
                    {{ f.render_form_field(form.course) }}
                </div>
                <div class="col-xm-12 col-md-6 mt-xm-2 mt-2">
                    {{ f.render_form_field(form.education) }}
                </div>
            </div>
            <div class="my-5">
                {{f.render_form_field(form.about_me)}}
            </div>

            {% if form.password.flags.required %}
            <div class="form-floating w-50">
                {% if form.password.errors %}
                <div class="form-group">
                    {{ form.password(class="form-control is-invalid" , id="validationServerUsername")}}

                    <ul class="invalid-feedback" id="validationServerUsernameFeedback">
                        {% for error in form.password.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% else %}
                {{ form.password(class="form-control form-control-lg" , placeholder="name@example.com",
                id="validationServerUsername")}}
                {% endif %}
                <label>*{{form.password.label()}}</label>
            </div>
            {% endif %}



            <div class="d-flex justify-content-between my-4">
                <a href="{{url_for('user.profile', username=current_user.username)}}"
                    class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-success">Update profile</button>

            </div>
        </div>



    </form>

</div>
{% endblock %}